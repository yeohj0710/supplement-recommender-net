# 건강 설문 설계서 v1 (22개 영양소 대응 · 10문항 리커트)

본 설문은 지난 **4주**를 기준으로, 각 문항에 대해 **1~5점 리커트 척도**로 답합니다.

- 1점: 전혀 아니다 · 2점: 아니다 · 3점: 보통이다 · 4점: 그렇다 · 5점: 매우 그렇다  
  응답 점수는 22개 영양제 카테고리의 **적합도(0~100%)** 산출을 위한 입력 신호로 사용됩니다.

---

## 1) 카테고리(22)

- 비타민C, 오메가3, 칼슘, 루테인, 비타민D, 밀크씨슬(실리마린), 프로바이오틱스(유산균), 비타민B, 마그네슘, 가르시니아, 종합비타민, 아연, 차전자피 식이섬유, 미네랄, 비타민A, 철분, 포스파티딜세린, 엽산, 아르기닌, 콘드로이친, 코엔자임Q10, 콜라겐

---

## 2) 설문 문항(10)

1. 하루 중 쉽게 피로해지고 에너지가 부족하다고 느낀다.
2. 뼈·관절 통증이나 뻣뻣함, 무릎/허리 부담이 자주 느껴진다.
3. 스트레스가 높고 불안·예민함이 지속되거나 수면의 질이 낮다.
4. 소화가 더디고 속 더부룩함·가스·변비 등 장 불편이 자주 있다.
5. 감기·염증 등 잔병치레가 잦거나 회복이 느리다.
6. 피부 탄력·건조·트러블이 걱정되거나 모발·손톱 상태가 좋지 않다.
7. 눈이 쉽게 피로하고 침침하거나 밤에 시야가 불편하다.
8. 음주가 잦거나 기름진 음식·약물 복용 등으로 간 건강이 걱정된다.
9. 혈압·혈중 지질(콜레스테롤/중성지방)·심박·복부지방 등 대사/심혈관 건강이 걱정된다.
10. 임신 준비·임신/수유 중이거나 월경 과다·빈혈 증상이 걱정된다.

응답은 각 문항별 1~5점으로 체크합니다.

---

## 3) 문항-카테고리 신호 매핑(학습 가중치 설계 가이드)

아래 매핑은 **문항 점수가 높을수록(⇧)** 해당 카테고리의 필요 신호가 커지도록 의도되었습니다.  
굵게 표기된 1순위 그룹은 가중치를 상대적으로 더 크게, 2·3순위는 점진적으로 작게 주는 것을 권장합니다.

| 문항                | 주요 신호 카테고리                                                            |
| ------------------- | ----------------------------------------------------------------------------- |
| Q1 에너지/피로      | **비타민B**, **코엔자임Q10**, **철분**, **아르기닌**, 종합비타민              |
| Q2 뼈/관절          | **칼슘**, **비타민D**, **콘드로이친**, 콜라겐, 미네랄                         |
| Q3 스트레스/수면    | **마그네슘**, 비타민B, 포스파티딜세린                                         |
| Q4 소화/장          | **프로바이오틱스(유산균)**, **차전자피 식이섬유**, 아연                       |
| Q5 면역/회복        | **비타민C**, **아연**, **비타민D**, 종합비타민                                |
| Q6 피부/모발/손톱   | **콜라겐**, 비타민C, 비타민A, 미네랄, 비타민B                                 |
| Q7 눈/시야          | **루테인**, 비타민A, 오메가3                                                  |
| Q8 간               | **밀크씨슬(실리마린)**                                                        |
| Q9 대사/심혈관/체중 | **오메가3**, **코엔자임Q10**, 마그네슘, 가르시니아, 차전자피 식이섬유, 미네랄 |
| Q10 생식/빈혈       | **엽산**, **철분**, 오메가3, 종합비타민                                       |

설계 체크포인트

- 각 문항은 최소 1개 이상, 최대 5~6개 카테고리와 연결하여 **신호 중복**을 허용(복합 증상 반영).
- 22개 카테고리가 **모두 커버**되도록 균형 배치.
- 1순위: 강한 양의 가중치, 2·3순위: 중·약한 양의 가중치.
- 모든 문항은 **단조 증가(응답↑ → 적합도 신호↑)**가 유지되도록 설계.

---

## 4) 적합도 산출(모델 전·후처리 가이드, 요약)

- 입력 정규화: 각 문항 1~5를 0~1 범위로 선형 스케일링 권장.
- 기본선(Baseline): 모든 응답이 3(보통)일 때 **무난한 카테고리(종합비타민, 비타민D, 비타민C, 오메가3, 프로바이오틱스)**가 소폭 우세하도록 설계.
- 캡핑: 모두 5일 때 상위 카테고리는 **90~100% 근접**, 1일 때는 **0~10% 근접**하도록 출력 레인지 보정.
- 소수점: 최종 적합도는 **0~100% (소수점 1자리)**로 반올림.
- 정렬: 적합도 **내림차순**으로 상위 N개(예: 3개) 표출.

---

## 5) 이후 단계(데이터 합성·학습·추론 파일 구조 제안)

- `make_dataset.py`
  - 위 매핑을 기반으로 사용자 응답 벡터(10차원, 1~5)를 무작위 샘플링
  - 문항-카테고리 가중치 행렬로 점수 생성 + 가우시안 노이즈
  - 정규화/캡핑 후 22차원 타깃 적합도(0~1) 산출, 학습/검증 분할 저장
- `train.py`
  - 단순 MLP(BCEWithLogitsLoss 대신 MSE/Huber 권장)로 10→64→22 회귀
  - Early stopping, 과적합 방지, ONNX 내보내기
- `infer.py`
  - 설문 응답(1~5) 입력 → 전처리 → ONNX 추론 → 0~100% 변환 → 소수점 1자리 반올림 → 상위 정렬

필요 시 위 3개 파일의 초기 버전도 만들어줄 수 있습니다.
